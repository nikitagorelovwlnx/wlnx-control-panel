<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WLNX Control Panel</title>
    <link rel="stylesheet" href="src/styles/minimal.css">
</head>
<body>
    <div class="app-container">
        <header class="header">
            <div class="header-content">
                <div class="header-left">
                    <h1>WLNX Control Panel</h1>
                    <p>Wellness coaching dashboard</p>
                </div>
                <div class="header-right">
                    <div class="status-grid">
                        <div class="status-item" id="server-status">
                            <span class="status-dot server"></span>
                            <span>Server: <span id="server-status-text">Checking...</span></span>
                        </div>
                        <div class="status-item" id="bot-status">
                            <span class="status-dot bot"></span>
                            <span>Bot: <span id="bot-status-text">Checking...</span></span>
                        </div>
                    </div>
                    <button class="refresh-btn" id="refresh-btn"> Refresh</button>
                </div>
            </div>
        </header>

        <main class="main-content">
            <!-- App Level Tabs -->
            <div class="app-tabs">
                <button class="app-tab-btn active" data-tab="dashboard">Dashboard</button>
                <button class="app-tab-btn" data-tab="prompts">Prompts Configuration</button>
            </div>

            <!-- Dashboard Tab Content -->
            <div class="app-tab-content active" id="app-tab-dashboard">
                <div class="panels-container" id="panels-container">
                <!-- Panel 1: Users List -->
                <div class="panel users-panel active" id="users-panel">
                    <div class="panel-header">
                        <h2>Users</h2>
                        <div class="panel-header-actions">
                            <button class="collapse-panel-btn" id="collapse-users" title="Collapse">←</button>
                        </div>
                    </div>
                    <div class="panel-content">
                        <div id="users-list" class="users-container">
                            <div class="loading">Loading users...</div>
                        </div>
                    </div>
                </div>

                <!-- Resizer 1 -->
                <div class="panel-resizer" id="resizer-1" data-direction="horizontal">
                    <div class="resizer-handle"></div>
                </div>

                <!-- Panel 2: User Sessions -->
                <div class="panel sessions-panel" id="sessions-panel">
                    <div class="panel-header">
                        <div class="panel-header-left">
                            <h2>Sessions</h2>
                            <span class="panel-subtitle" id="selected-user-name"></span>
                        </div>
                        <div class="panel-header-actions">
                            <button class="collapse-panel-btn" id="collapse-sessions" title="Collapse">←</button>
                            <button class="close-panel-btn" id="close-sessions">✕</button>
                        </div>
                    </div>
                    <div class="panel-content">
                        <div id="sessions-list" class="sessions-container">
                        </div>
                    </div>
                </div>

                <!-- Resizer 2 -->
                <div class="panel-resizer" id="resizer-2" data-direction="horizontal">
                    <div class="resizer-handle"></div>
                </div>

                <!-- Panel 3: Session Details -->
                <div class="panel details-panel" id="details-panel">
                    <div class="panel-header">
                        <h2>Details</h2>
                        <span class="panel-subtitle" id="selected-session-id"></span>
                        <div class="panel-header-actions">
                            <div class="polling-indicator" id="polling-indicator" title="Auto-updating every 5s">
                                <div class="polling-dot"></div>
                            </div>
                            <button class="close-panel-btn" id="close-details">✕</button>
                        </div>
                    </div>
                    <div class="panel-content">
                        <div class="details-container">
                            <!-- Tab Navigation -->
                            <div class="details-tabs">
                                <button class="tab-btn active" data-tab="summary">Summary</button>
                                <button class="tab-btn" data-tab="transcript">Transcript</button>
                                <button class="tab-btn" data-tab="wellness">Wellness</button>
                            </div>
                            
                            <!-- Tab Contents -->
                            <div class="tab-content-container">
                                <!-- Summary Tab -->
                                <div class="tab-content active" id="tab-summary">
                                    <div class="tab-body" id="summary-content"></div>
                                </div>
                                
                                <!-- Transcript Tab -->
                                <div class="tab-content" id="tab-transcript">
                                    <div class="tab-body" id="transcript-content"></div>
                                </div>
                                
                                <!-- Wellness Tab -->
                                <div class="tab-content" id="tab-wellness">
                                    <div class="tab-body" id="wellness-content"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Prompts Configuration Tab Content -->
            <div class="app-tab-content" id="app-tab-prompts">
                <div class="prompts-container">
                    <div class="prompts-header">
                        <h2>Prompts Configuration</h2>
                        <p>Configure conversation prompts for each stage of the wellness coaching interview</p>
                        <div class="prompts-actions">
                            <button class="btn btn-primary" id="save-prompts">Save Configuration</button>
                            <button class="btn btn-secondary" id="reload-prompts">Reload from Server</button>
                        </div>
                    </div>
                    
                    <div class="prompts-content" id="prompts-content">
                        <div class="loading">Loading prompts configuration...</div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Interview Viewer Modal -->
    <div id="interview-viewer" style="display: none;"></div>

    <script type="module" src="dist/index.js"></script>
</body>
</html>
